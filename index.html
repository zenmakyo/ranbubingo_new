<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ãƒ“ãƒ³ã‚´</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background-color: #d8c690; /* ç•³ã£ã½ã„èƒŒæ™¯ */
      font-family: sans-serif;
    }
    table {
      width: 90vmin;
      height: 90vmin;
      margin: 2vmin auto;
      border-collapse: collapse;
      table-layout: fixed;
    }
    td {
      border: 2px solid #555;
      position: relative;
      text-align: center;
      vertical-align: middle;
    }
    .cell-input {
      width: 90%;
      box-sizing: border-box;
      font-size: 2vmin;
      padding: 0.2em;
      margin: auto;
      display: block;
    }
    .center-cell {
      font-size: 3vmin;
    }
    .usedDefault {
      background-color: #ccc;
    }
    .rainbow-bg {
      background: linear-gradient(135deg, red, orange, yellow, green, cyan, blue, violet);
      color: white;
    }
    .suggestions {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: white;
      border: 1px solid #aaa;
      z-index: 10;
      max-height: 120px;
      overflow-y: auto;
    }
    .suggestion-item {
      padding: 4px;
      cursor: pointer;
    }
    .suggestion-item:hover {
      background: #eee;
    }
    .controls {
      text-align: center;
      margin-bottom: 10px;
    }
    .controls button {
      font-size: 2vmin;
      margin: 0 1em;
      padding: 0.5em 1.5em;
      border-radius: 6px;
      border: none;
      background: #666;
      color: white;
      cursor: pointer;
    }
  </style>
</head>
<body>

<div class="controls">
  <button onclick="fillRandom()">ãƒ©ãƒ³ãƒ€ãƒ é…ç½®</button>
  <button onclick="resetBoard()">ãƒªã‚»ãƒƒãƒˆ</button>
</div>

<table id="bingo">
  <!-- JSã§ã‚»ãƒ«ã‚’ä½œæˆ -->
</table>

<script>
  // ğŸ”¤ ç·¨é›†ã—ã‚„ã™ã„ãƒ¯ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆï¼ˆè‡ªç”±ã«å¤‰æ›´OKï¼‰
  const words = [
    "å¯Œå£«å±±", "æ¡œ", "å¿è€…", "å¯¿å¸", "ç€ç‰©", "ä¾", "æ­Œèˆä¼", "æ¸©æ³‰", "ç¥ç¤¾", "ç¥­ã‚Š",
    "ç•³", "èŒ¶é“", "ç›†æ ½", "å’Œè“å­", "æŠ˜ã‚Šç´™", "åˆ€", "èŠ±ç«", "é¤…", "ç¸å´", "ã“ãŸã¤",
    "ãŠã«ãã‚Š", "å‘³å™Œæ±", "æµ®ä¸–çµµ", "å°†è»", "æŠ¹èŒ¶"
  ];

  // ğŸŒˆ è™¹è‰²ã«ã—ãŸã„ãƒ¯ãƒ¼ãƒ‰
  const rainbowWords = ["å¯Œå£«å±±", "æ¡œ", "å¿è€…", "å¯¿å¸"];

  const table = document.getElementById("bingo");

  for (let i = 0; i < 5; i++) {
    const row = document.createElement("tr");
    for (let j = 0; j < 5; j++) {
      const td = document.createElement("td");

      if (i === 2 && j === 2) {
        td.innerHTML = '<div class="center-cell">â­</div>';
      } else {
        const input = document.createElement("input");
        input.type = "text";
        input.className = "cell-input";
        input.placeholder = "æœªé¸æŠ";

        const suggestionBox = document.createElement("div");
        suggestionBox.className = "suggestions";
        suggestionBox.style.display = "none";

        input.addEventListener("input", () => {
          const val = input.value.toLowerCase();
          suggestionBox.innerHTML = "";
          if (!val) {
            suggestionBox.style.display = "none";
            return;
          }

          const filtered = words.filter(w => w.toLowerCase().includes(val));
          if (filtered.length) {
            filtered.forEach(w => {
              const item = document.createElement("div");
              item.className = "suggestion-item";
              item.textContent = w;
              item.onclick = () => {
                input.value = w;
                suggestionBox.style.display = "none";
                updateCellColor(td, w);
              };
              suggestionBox.appendChild(item);
            });
            suggestionBox.style.display = "block";
          } else {
            suggestionBox.style.display = "none";
          }
        });

        input.addEventListener("blur", () => {
          setTimeout(() => {
            suggestionBox.style.display = "none";
            const value = input.value.trim();
            if (value) {
              if (!words.includes(value)) {
                alert("ãã®ãƒ¯ãƒ¼ãƒ‰ã¯ã‚ã‚Šã¾ã›ã‚“");
                input.value = "";
                td.className = "";
              } else {
                updateCellColor(td, value);
              }
            }
          }, 200);
        });

        td.appendChild(input);
        td.appendChild(suggestionBox);
      }

      row.appendChild(td);
    }
    table.appendChild(row);
  }

  function updateCellColor(td, word) {
    td.className = rainbowWords.includes(word) ? "rainbow-bg" : "usedDefault";
  }

  function getAllInputs() {
    return Array.from(document.querySelectorAll(".cell-input"));
  }

  function fillRandom() {
    const pool = [...words];
    shuffle(pool);
    getAllInputs().forEach((input, i) => {
      const word = pool[i] || "";
      input.value = word;
      updateCellColor(input.parentElement, word);
    });
  }

  function resetBoard() {
    getAllInputs().forEach(input => {
      input.value = "";
      input.parentElement.className = "";
    });
  }

  function shuffle(arr) {
    for (let i = arr.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [arr[i], arr[j]] = [arr[j], arr[i]];
    }
  }
</script>

</body>
</html>
